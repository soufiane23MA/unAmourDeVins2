{# templates/produit/filter_prix.html.twig #}
{% extends 'base.html.twig' %}

{% block body %}
    <h1>Filtrer les produits par prix</h1>


<!-- cette vue est obsolette avant de la supprimer , tu fais des testes  -->


    <div class="filter-form">
        {# Formulaire de filtrage des prix #}
        {{ form_start(form, {'method': 'GET'}) }}
            <div>
                {{ form_label(form.Prix) }}
                <div id="prix-slider"></div>
                {{ form_widget(form.Prix, {'attr': {'style': 'display:none'}}) }}
                <p style="color: black;">Prix maximum : <span id="slider-value">{{ prixMax }}</span> €</p>
            </div>
            <button type="submit" class="btn btn-primary">Filtrer</button>
        {{ form_end(form) }}
    </div>
<!-- cette vue est obsolette avant de la supprimer , tu fais des testes  -->


    <div class="produits-list">
        <h2>Produits filtrés par prix</h2>
        {% if produits is not empty %}
            <ul>
                {% for produit in produits %}
                    <li>
                        <h3>{{ produit.nomProduit }}</h3>
                        <p>Prix : {{ produit.prix }} €</p>
                        <p>{{ produit.detailProduit }}</p>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>Aucun produit trouvé avec ce prix.</p>
        {% endif %}
    </div>

<!-- cette vue est obsolette avant de la supprimer , tu fais des testes  -->

    <script>
        // Met à jour la valeur du slider en temps réel
        const slider = document.getElementById('prix-slider'); // Sélectionne le slider
        const sliderValue = document.getElementById('slider-value'); // Sélectionne l'élément pour afficher la valeur

        if (slider && sliderValue) { // Vérifie que les éléments existent
            // Affiche la valeur initiale du slider
            sliderValue.textContent = slider.value;

            // Met à jour la valeur affichée lorsque l'utilisateur déplace le slider
            slider.addEventListener('input', function() {
                sliderValue.textContent = this.value;
            });
        } else {
            console.error("Erreur : Le slider ou l'élément d'affichage est introuvable.");
        }
    </script>
{% endblock %}